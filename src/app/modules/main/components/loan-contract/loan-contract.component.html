<div class="w-full bg-white" *ngIf="!showForm">
    <div class="p-8 rounded-xl shadow-sm mx-auto">
        <h2 class="text-2xl font-semibold mb-2">ุซุจุช ูุฑุงุฑุฏุงุฏ ุชุณููุงุช</h2>
    </div>
</div>


<div class="p-6 space-y-6 rounded-2xl">
    <div [formGroup]="form" class="bg-white p-6 rounded-xl border border-slate-200">
        <p-table [value]="customerTable" [rows]="5" [paginator]="true"
                 styleClass="p-datatable-striped p-datatable-gridlines">
            <ng-template pTemplate="caption">
                <div class="flex justify-between">
                    <h3 class="text-base font-semibold">ุงุทูุงุนุงุช ูุดุชุฑ</h3>
                </div>
            </ng-template>

            <ng-template pTemplate="header">
                <tr>
                    <th>ุฑุฏู</th>
                    <th>ุดูุงุฑู ูุดุชุฑ</th>
                    <th>ูุงู ูุดุชุฑ</th>
                    <th>ฺฉุฏ/ุดูุงุณู ูู</th>
                    <th>ุชุงุจุนุช</th>
                    <th>ููุน</th>

                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row let-index="rowIndex">
                <tr>
                    <td>{{ index + 1 }}</td>
                    <td>{{ row.customerNumber }}</td>
                    <td>{{ row.customerName }}</td>
                    <td>{{ row.nationalId }}</td>
                    <td>{{ row.citizenship }}</td>
                    <td>{{ row.type }}</td>

                </tr>
            </ng-template>
        </p-table>
        <p-table [value]="productTable" [rows]="5" [paginator]="true"
                 styleClass="p-datatable-striped p-datatable-gridlines">
            <ng-template pTemplate="caption">
                <div class="flex justify-between">
                    <h3 class="text-base font-semibold">ุงุทูุงุนุงุช ูุญุตูู</h3>
                </div>
            </ng-template>

            <ng-template pTemplate="header">
                <tr>
                    <th>ุฑุฏู</th>
                    <th>ุนููุงู ูุญุตูู</th>
                    <th>ุญุฏุงฺฉุซุฑ ูุจูุบ</th>
                    <th>ุญุฏุงฺฉุซุฑ ูุฏุช</th>
                    <th>ููุน ุงุฑุฒ</th>
                    <th>ุนููุงุช</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row let-index="rowIndex">
                <tr>
                    <td>{{ index + 1 }}</td>
                    <td>{{ row.title }}</td>
                    <td>{{ row.maxAmount }}</td>
                    <td>{{ row.maxDuration }}</td>
                    <td>{{ row.currency }}</td>
                    <td>
                        <button pButton
                                icon="pi pi-eye"
                                class="p-button-sm p-button-rounded p-button-outlined" (click)="openApprovalDetails(row)"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <p-table [value]="approvalTable" [rows]="5" [paginator]="true"
                 styleClass="p-datatable-striped p-datatable-gridlines">
            <ng-template pTemplate="caption">
                <div class="flex justify-between">
                    <h3 class="text-base font-semibold">ุงุทูุงุนุงุช ูุตูุจู</h3>
                </div>
            </ng-template>

            <ng-template pTemplate="header">
                <tr>
                    <th>ุฑุฏู</th>
                    <th>ูุจูุบ ูุตูุจ</th>
                    <th>ูุฏุช ุงุนุชุจุงุฑ ูุตูุจู</th>
                    <th>ูุฏุช ุชุณููุงุช</th>
                    <th>ูุฑุฎ ุณูุฏ/ฺฉุงุฑูุฒุฏ</th>
                    <th>ูุฑุฎ ุฎุณุงุฑุช</th>
                    <th>ุนููุงุช</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row let-index="rowIndex">
                <tr>
                    <td>{{ index + 1 }}</td>
                    <td>{{ row.approvedAmount }}</td>
                    <td>{{ row.approvalDuration }}</td>
                    <td>{{ row.loanDuration }}</td>
                    <td>{{ row.interestRate }}</td>
                    <td>{{ row.penaltyRate }}</td>
                    <td>
                        <button pButton
                                icon="pi pi-eye"
                                class="p-button-sm p-button-rounded p-button-outlined" (click)="openProductDetails(row)"></button>

                    </td>
                </tr>
            </ng-template>
        </p-table>

    </div>
</div>
<!--<div class="bg-white p-6 rounded-xl border border-slate-200 mt-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

        &lt;!&ndash; ูุจูุบ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ูุจูุบ</label>
            <input type="text" pInputText disabled class="normal-input" formControlName="amount">
        </div>

        &lt;!&ndash; ุชุนุฏุงุฏ ุงูุณุงุท &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ุชุนุฏุงุฏ ุงูุณุงุท</label>
            <input type="number" pInputText disabled class="normal-input" formControlName="installmentsCount">
        </div>

        &lt;!&ndash; ูุงุตูู ุงูุณุงุท &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ูุงุตูู ุงูุณุงุท</label>
            <input type="number" pInputText disabled class="normal-input" formControlName="installmentsInterval">
        </div>

        &lt;!&ndash; ูุจูุบ ฺฉุงุฑูุฒุฏ ุฏูุฑุงู ุชููุณ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ูุจูุบ ฺฉุงุฑูุฒุฏ ุฏูุฑุงู ุชููุณ</label>
            <input type="text" pInputText disabled class="normal-input" formControlName="gracePeriodFee">
        </div>

        &lt;!&ndash; ุฑูุด ูฺฏูุฏุงุฑ ฺฉุงุฑูุฒุฏ ุฏูุฑุงู ุชููุณ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ุฑูุด ูฺฏูุฏุงุฑ ฺฉุงุฑูุฒุฏ ุฏูุฑุงู ุชููุณ</label>
            <input type="text" pInputText disabled class="normal-input" formControlName="graceFeeKeepMethod">
        </div>

        &lt;!&ndash; ุฑูุด ูุตูู ฺฉุงุฑูุฒุฏ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ุฑูุด ูุตูู ฺฉุงุฑูุฒุฏ</label>
            <input type="text" pInputText disabled class="normal-input" formControlName="feeReceiveMethod">
        </div>

        &lt;!&ndash; ุฑูุด ูุญุงุณุจู ุณูุฏ / ฺฉุงุฑูุฒุฏ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ุฑูุด ูุญุงุณุจู ุณูุฏ / ฺฉุงุฑูุฒุฏ</label>
            <input type="text" pInputText disabled class="normal-input" formControlName="profitFeeCalculationMethod">
        </div>

        &lt;!&ndash; ุชุงุฑุฎ ุณุฑุฑุณุฏ ูุฑุงุฑุฏุงุฏ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ุชุงุฑุฎ ุณุฑุฑุณุฏ ูุฑุงุฑุฏุงุฏ</label>
            <input type="text" pInputText disabled class="normal-input" formControlName="contractDueDate">
        </div>

        &lt;!&ndash; ูููุช ุชููุณ &ndash;&gt;
        <div class="flex flex-col">
            <label class="mb-1 font-medium">ูููุช ุชููุณ (ุฑูุฒ)</label>
            <input type="number" pInputText disabled class="normal-input" formControlName="graceDays">
        </div>

        &lt;!&ndash; ุชูุถุญุงุช &ndash;&gt;
        <div class="flex flex-col col-span-1 md:col-span-3">
            <label class="mb-1 font-medium">ุชูุถุญุงุช (ุงุฎุชุงุฑ)</label>
            <input type="text" pInputText class="normal-input" formControlName="description">
        </div>

        &lt;!&ndash; ุชูุฏุฏ + ุฌุฏูู ุงูุณุงุท &ndash;&gt;
        <div class="flex items-center gap-6 col-span-1 md:col-span-3 mt-4">
            <div class="flex items-center gap-2">
                <label class="font-medium">ุชูุฏุฏ ูุฌุฏุฏ</label>
                <p-inputSwitch formControlName="renewable"></p-inputSwitch>
            </div>

            <button
                pButton
                label="ุฌุฏูู ุงูุณุงุท"
                class="p-button-primary normal-button"
                type="button"
                (click)="openInstallmentTable()">
            </button>
        </div>

    </div>
</div>-->
<div class="p-6 space-y-6 rounded-2xl" *ngIf="!showForm">
    <div [formGroup]="productForm" class="bg-white p-6 rounded-xl border border-slate-200">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ูุจูุบ:</label>
                <input type="text" pInputText readonly
                       class="normal-input"
                       formControlName="amount"
                      >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ุชุนุฏุงุฏ ุงูุณุงุท:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="installmentsCount"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ูุงุตูู ุงูุณุงุท:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="installmentsInterval"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ุฑูุด ูฺฏูุฏุงุฑ ฺฉุงุฑูุฒุฏ ุฏูุฑุงู ุชููุณ:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="graceFeeKeepMethod"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ูุจูุบ ฺฉุงุฑูุฒุฏ ุฏูุฑุงู ุชููุณ:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="gracePeriodFee"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ุฑูุด ูุตูู ฺฉุงุฑูุฒุฏ:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="feeReceiveMethod"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ูููุช ุชููุณ:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="graceDays"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ุชุงุฑุฎ ุณุฑุฑุณุฏ ูุฑุงุฑุฏุงุฏ:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="contractDueDate"
                       >
            </div>
            <div class="flex flex-col">
                <label class="mb-1 font-medium">ุฑูุด ูุญุงุณุจู ุณูุฏ/ฺฉุงุฑูุฒุฏ:</label>
                <input type="text" pInputText
                       class="normal-input"
                       formControlName="profitFeeCalculationMethod"
                       >
            </div>


            <!-- ุฑุฏู ุชูุถุญุงุช + ุชูุฏุฏ/ุฌุฏูู ุงูุณุงุท -->
            <div class="grid grid-cols-12 gap-6 mt-4">

                <!-- ๐น ุชูุถุญุงุช โ 8 ุณุชูู -->
                <div class="col-span-12 md:col-span-8 flex flex-col">
                    <label class="mb-1 font-medium">ุชูุถุญุงุช:</label>
                    <textarea
                        pInputTextarea
                        rows="5"
                        class="normal-input"
                        formControlName="description"
                        placeholder="ุชูุถุญุงุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ"></textarea>
                </div>

                <!-- ๐น ุชูุฏุฏ ูุฌุฏุฏ + ุฏฺฉูู ุฌุฏูู ุงูุณุงุท โ 4 ุณุชูู -->
                <div class="col-span-12 md:col-span-4 flex flex-col justify-start gap-4">

                    <div class="flex items-center gap-3">
                        <label class="font-medium">ุชูุฏุฏ ูุฌุฏุฏ</label>
                        <p-inputSwitch formControlName="renewable"></p-inputSwitch>
                    </div>

                    <button
                        pButton
                        label="ุฌุฏูู ุงูุณุงุท"
                        class="p-button-primary normal-button w-full"
                        type="button"
                        (click)="openInstallmentTable()">
                    </button>

                </div>

            </div>


        </div>


    </div>

</div>

<p-dialog
    header="ุฌุฒุฆุงุช ูุญุตูู"
    [(visible)]="showProductDetails"
    [modal]="true"
    [closable]="true"
    [style]="{ width: '1100px' }"
    [draggable]="false"
    [resizable]="false"
>
    <div class="p-6">

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <!-- ุณุชูู 1 -->
            <div class="flex flex-col gap-4">

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุนููุงู ูุญุตูู</label>
                    <input pInputText class="normal-input" disabled
                           [value]="selectedProduct?.title" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุญุฏุงฺฉุซุฑ ูุจูุบ</label>
                    <input pInputText class="normal-input" disabled
                           [value]="selectedProduct?.maxAmount" />
                </div>

            </div>

            <!-- ุณุชูู 2 -->
            <div class="flex flex-col gap-4">

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุญุฏุงฺฉุซุฑ ูุฏุช</label>
                    <input pInputText class="normal-input" disabled
                           [value]="selectedProduct?.maxDuration" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ููุน ุงุฑุฒ</label>
                    <input pInputText class="normal-input" disabled
                           [value]="selectedProduct?.currency" />
                </div>

            </div>

            <!-- ุณุชูู 3 -->
            <div class="flex flex-col gap-4">

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ูุฏู ุงุฒ ุฏุฑุงูุช</label>
                    <input pInputText class="normal-input" disabled value="ุฎุฑุฏ" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ููุจุน ุชุฃูู</label>
                    <input pInputText class="normal-input" disabled value="ุฏุงุฎู ุจุงูฺฉ" />
                </div>

            </div>

        </div>


        <div class="flex justify-end gap-4 mt-8">

            <button
                pButton
                label="ุงูุตุฑุงู"
                class="p-button p-button-danger w-32 h-10"
                (click)="showProductDetails = false"

            ></button>
        </div>

    </div>
</p-dialog>
<p-dialog
    header="ุฌุฒุฆุงุช ูุตูุจู"
    [(visible)]="showApprovalDetails"
    [modal]="true"
    [closable]="true"
    [style]="{ width: '1100px' }"
    [draggable]="false"
    [resizable]="false"
>
    <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <!-- ุณุชูู 1 -->
            <div class="flex flex-col gap-4">

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุดูุงุฑู ูุตูุจู</label>
                    <input pInputText class="normal-input" [disabled]="true"
                           [value]="selectedApproval?.approvalNumber || '---'" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ูุจูุบ ุณูุฏ / ฺฉุงุฑูุฒุฏ</label>
                    <input pInputText class="normal-input" [disabled]="true"
                           [value]="selectedApproval?.interestRate" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ูุฏู ุงุฒ ุฏุฑุงูุช</label>
                    <input pInputText class="normal-input" [disabled]="true"
                           value="ุงุฌุงุฏ" />
                </div>

            </div>

            <!-- ุณุชูู 2 -->
            <div class="flex flex-col gap-4">

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุงุฒ ูุญู ุญุฏ ุงุนุชุจุงุฑ</label>
                    <input pInputText class="normal-input" disabled
                           value="ุณูู ูุตูุจ" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุฑูุด ูุญุงุณุจู ุณูุฏ / ฺฉุงุฑูุฒุฏ</label>
                    <input pInputText class="normal-input" disabled
                           [value]="selectedApproval?.approvalDuration" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ูุฏุช ุงุนุชุจุงุฑ ูุตูุจู</label>
                    <input pInputText class="normal-input" disabled
                           [value]="selectedApproval?.loanDuration" />
                </div>

            </div>

            <!-- ุณุชูู 3 -->
            <div class="flex flex-col gap-4">

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ููุน ูุฑุงฺฏุฑ</label>
                    <input pInputText class="normal-input" disabled value="ุชุณููุงุช" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุญุฏุงฺฉุซุฑ ูุจูุบ ุชุณููุงุช</label>
                    <input pInputText class="normal-input" disabled value="ฑตฐูฌฐฐฐูฌฐฐฐ ุฑุงู" />
                </div>

                <div class="flex flex-col">
                    <label class="mb-1 font-medium">ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุงูุณุงุท</label>
                    <input pInputText class="normal-input" disabled value="ถฐ" />
                </div>

            </div>

        </div>
        <div class="flex justify-end gap-4 mt-8">

            <button
                pButton
                label="ุงูุตุฑุงู"
                class="p-button p-button-danger w-32 h-10"
                (click)="showApprovalDetails = false"
            ></button>
        </div>

    </div>
</p-dialog>



